# SMTP 邮件配置指南

本指南介绍如何在 Xunyin Admin 系统中配置 SMTP 邮件服务，用于发送验证码、通知等邮件。

## 配置入口

系统设置 → 邮件设置

## 配置项说明

| 配置项 | 说明 | 示例 |
|--------|------|------|
| 启用邮件服务 | 开关，开启后系统可发送邮件 | 开启 |
| SMTP 服务器 | 邮件服务商的 SMTP 地址 | smtp.qq.com |
| SMTP 端口 | SMTP 服务端口 | 465 或 587 |
| SSL/TLS | 是否启用加密连接 | 启用 SSL |
| 邮箱账号 | 登录 SMTP 服务器的账号 | your@qq.com |
| 邮箱密码/授权码 | 登录密码或授权码 | xxxxxxxx |
| 发件人地址 | 邮件显示的发件人 | noreply@example.com |

## 常用邮箱配置

### QQ 邮箱

1. 登录 [QQ 邮箱](https://mail.qq.com)
2. 进入 设置 → 账户 → POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV服务
3. 开启 SMTP 服务，获取授权码

```
SMTP 服务器: smtp.qq.com
端口: 465 (SSL) 或 587 (STARTTLS)
账号: 你的QQ邮箱地址
密码: 授权码（非QQ密码）
```

### 163 邮箱

1. 登录 [163 邮箱](https://mail.163.com)
2. 进入 设置 → POP3/SMTP/IMAP
3. 开启 SMTP 服务，设置授权码

```
SMTP 服务器: smtp.163.com
端口: 465 (SSL) 或 25
账号: 你的163邮箱地址
密码: 授权码
```

### 阿里云企业邮箱

```
SMTP 服务器: smtp.qiye.aliyun.com
端口: 465 (SSL)
账号: 完整邮箱地址
密码: 邮箱密码
```

### 腾讯企业邮箱

```
SMTP 服务器: smtp.exmail.qq.com
端口: 465 (SSL)
账号: 完整邮箱地址
密码: 邮箱密码或授权码
```

### Gmail

1. 需要开启"两步验证"
2. 生成"应用专用密码"

```
SMTP 服务器: smtp.gmail.com
端口: 465 (SSL) 或 587 (STARTTLS)
账号: 你的Gmail地址
密码: 应用专用密码
```

### Outlook / Office 365

```
SMTP 服务器: smtp.office365.com
端口: 587 (STARTTLS)
账号: 完整邮箱地址
密码: 邮箱密码
SSL/TLS: 不启用（使用 STARTTLS）
```

## 测试配置

1. 填写完所有配置项后，点击「保存设置」
2. 点击「测试发送」按钮
3. 系统会向发件人地址发送一封测试邮件
4. 检查收件箱，确认是否收到测试邮件

## 常见问题

### 1. 发送失败：认证错误

- 检查账号和密码是否正确
- QQ/163 等邮箱需要使用**授权码**而非登录密码
- 确认 SMTP 服务已开启

### 2. 发送失败：连接超时

- 检查 SMTP 服务器地址是否正确
- 检查端口号是否匹配 SSL 设置
- 服务器防火墙可能阻止了 SMTP 端口

### 3. 发送失败：SSL 错误

- 端口 465 通常需要启用 SSL
- 端口 587 通常使用 STARTTLS，可尝试不启用 SSL
- 端口 25 通常不加密

### 4. 邮件发送成功但收不到

- 检查垃圾邮件文件夹
- 发件人地址可能被标记为垃圾邮件
- 部分邮箱有延迟，稍等几分钟

## 端口选择建议

| 端口 | 加密方式 | 说明 |
|------|----------|------|
| 25 | 无 | 传统端口，部分服务商已禁用 |
| 465 | SSL/TLS | 推荐，直接加密连接 |
| 587 | STARTTLS | 推荐，先连接后升级加密 |

**建议优先使用 465 端口 + SSL**，兼容性最好。
