# Zeabur 部署配置
# 文档: https://zeabur.com/docs/deploy/config-file

# 后端服务
- name: server
  source:
    type: git
    repo: .
    root: server-nestjs
  build:
    type: dockerfile
  env:
    NODE_ENV: production
    PORT: "3000"
    LOG_LEVEL: info
    LOG_DIR: logs
    REDIS_ENABLED: "true"
    # 以下变量需要在 Zeabur 控制台手动设置
    # DATABASE_URL: ${POSTGRES_CONNECTION_STRING}
    # REDIS_URL: ${REDIS_CONNECTION_STRING}
    # JWT_SECRET: <生成强密钥>
    # CORS_ORIGINS: <前端域名>

# 前端服务
- name: web
  source:
    type: git
    repo: .
    root: web
  build:
    type: dockerfile
  ports:
    - 80
